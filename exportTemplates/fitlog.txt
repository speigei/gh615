<<?= str('?') ?>xml version="1.0" encoding="utf-8"?>
<FitnessWorkbook version="1.0" creator="code.google.com/p/GH615"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.zonefivesoftware.com/xmlschemas/FitnessLogbook/v1">
  <AthleteLog>
  <? for track in tracks: ?>
    <Activity StartTime= "<?= track['trackinfo']['date'].strftime("%Y-%m-%dT%H:%M:%SZ") ?>">
      <Metadata Source="GlobalSat GH615M" Created="<?= track['trackinfo']['date'].strftime("%Y-%m-%dT%H:%M:%SZ") ?>" Modified="<?= track['trackinfo']['date'].strftime("%Y-%m-%dT%H:%M:%SZ") ?>" />
      <!-- topspeed=<?= track['trackinfo']['topspeed'] / 100.0 ?> -->
      <Duration TotalSeconds="<?= track['trackinfo']['duration'] / 10.0 ?>" /> 
      <Distance TotalMeters="<?= track['trackinfo']['distance'] ?>" /> 
      <Calories TotalCal="<?= track['trackinfo']['calories'] ?>" /> 
      <Track StartTime= "<?= track['trackinfo']['date'].strftime("%Y-%m-%dT%H:%M:%SZ") ?>" >
  	  <? for trackpoint in track['trackpoints']: ?>
        <pt tm="<?= (trackpoint['date']-track['trackinfo']['date']).days * 24.0 * 3600.0 + (trackpoint['date']-track['trackinfo']['date']).seconds + (trackpoint['date']-track['trackinfo']['date']).microseconds / 1000000.0 ?>" lat="<?= trackpoint['latitude'] ?>" lon="<?= trackpoint['longitude'] ?>" ele="<?= trackpoint['altitude'] ?>" hr="<?= trackpoint['heartrate'] ?>" dist="<?= (trackpoint['interval']/10.0) * ((trackpoint['speed'] * 1000.0 )/ 3600.0) ?>" /> <!-- speed="<?= trackpoint['speed'] ?>" -->
	    <? end ?>
      </Track>
    </Activity>
  <? end ?>
  </AthleteLog>
</FitnessWorkbook>